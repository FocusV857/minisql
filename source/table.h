#ifndef TABLE_H
#define TABLE_H
#include <string>
#include <vector>
#include <fstream>
#include <map>
#include <unordered_set>
#include "tuple.h"
using namespace std;


class Table {
private:
    string title_;  //????
    Index index_;  //???????????
    void ConstructMap();
public:
    Attribute attr_;  //????
    map<string , int> AttrName2Index;
    map<string , unordered_set<string> > Unique;
    //??????
    Table() {};
    Table(string title, Attribute attr);
    Table(const Table& table_in);
    Table( string name ):title_(name){};

    void SetTitle( string name );
    int addTuple(Tuple tuple_in); // ????????????tuple_in ??????????table????????
    int setIndex(short index, string index_name);  //?????????????????????????Attribute??????????????????????????1??????0
    int dropIndex(string index_name);  //???????????????????????????????????1??????0
    string getTitle();
    Attribute getAttr();
    vector <Tuple>& getTuple();//???????
    Index getIndex();
    string GetIndexName( int t );
    short gethasKey();//?????????????????????
    void showTable(); //?????????????
    void showTable(int limit);//???table?????????
    int HasAttribute( string name );
    friend istream& operator>>( istream & in , Table & t); 
    friend ostream& operator<<( ostream & out , const Table & t);
    vector<int >& ConvertIntoIndex( const vector<string> AttrName );
};

#endif